@startuml
skinparam backgroundColor #F8F8F8
skinparam state {
  BackgroundColor<<idle>> #E0FFE0
  BorderColor<<idle>> #006400
  BackgroundColor<<active>> #E0F0FF
  BorderColor<<active>> #00008B
  BackgroundColor<<overload>> #FFE0E0
  BorderColor<<overload>> #8B0000
  BackgroundColor<<charge>> #F0F0F0
  BorderColor<<charge>> #808080
  FontSize 12
  ArrowColor Black
}

title State-диаграмма Робота-курьера\n(умеренная нагрузка, система "умный дом")

[*] --> Зарядка <<charge>>

Зарядка --> Ожидание_задания <<idle>> : Заряжен полностью
Ожидание_задания --> Навигация_к_смартфону <<active>> : Получено задание от Fog-узла
Навигация_к_смартфону --> Передача_данных <<active>> : Достиг смартфона
Передача_данных --> Ожидание_задания <<idle>> : Данные успешно переданы

Передача_данных --> Перегрузка <<overload>> : Буфер переполнен\n(редко при умеренной нагрузке)
Перегрузка --> Ожидание_задания <<idle>> : Буфер очищен / ошибка устранена

Зарядка --> Перегрузка <<overload>> : Низкий заряд во время передачи
Перегрузка --> Зарядка <<charge>> : Требуется срочная подзарядка

note right of Передача_данных
  Передача по Bluetooth / Wi-Fi
  Время передачи: 5–15 секунд
  Объём данных: до 1 МБ
end note

note bottom of Перегрузка
  Состояние возникает редко
  при умеренной нагрузке
  (максимум 2 датчика на Fog)
end note

note left of Навигация_к_смартфону
  Движение робота
  к ближайшему смартфону
  (автономная навигация)
end note

@enduml